connections {

   vpn {
      local_addrs  = {{IPSEC_IP}}
      pools = rw_pool

      local {
         auth = pubkey
         certs = {{IPSEC_CERT_PATH}}/{{IPSEC_CERT_NAME}}
         id = {{IPSEC_FQDN}}
      }
      remote {
         #auth = pubkey
         auth = eap-tls
         # go ask the client for its eap identity.
      }
      children {
         vpn {
            local_ts = {{IPSEC_ENCRYPTION_DOMAIN}}


            updown = /usr/libexec/strongswan/_updown iptables
            rekey_time = 5400
            rekey_bytes = 500000000
            rekey_packets = 1000000
            esp_proposals = default
         }
      }
      version = 2
      proposals = aes192gcm16-aes128gcm16-prfsha256-ecp256-ecp521,aes192-sha256-modp3072,default
   }
}


pools {
        rw_pool  {
                addrs = {{IPSEC_ENCRYPTION_DOMAIN}}
        }
}
